<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Unpack state — dust_unpack_state • dust2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Unpack state — dust_unpack_state"><meta name="description" content='Unpack state.  You will see state come out of dust2 systems in
several places, for example dust_system_state, but it will
typically be an unstructured vector with no names; this is not very
useful!  However, your model knows what each element, or group of
elements "means".  You can unpack your state from this
unstructured array into a named list using this function.  The
same idea applies to the higher-dimensional arrays that you might
get if your system has multiple particles, multiple parameter
groups or has been run for multiple time steps.'><meta property="og:description" content='Unpack state.  You will see state come out of dust2 systems in
several places, for example dust_system_state, but it will
typically be an unstructured vector with no names; this is not very
useful!  However, your model knows what each element, or group of
elements "means".  You can unpack your state from this
unstructured array into a named list using this function.  The
same idea applies to the higher-dimensional arrays that you might
get if your system has multiple particles, multiple parameter
groups or has been run for multiple time steps.'><meta property="og:image" content="https://mrc-ide.github.io/dust2/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dust2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.28</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dust2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/design.html">Principles and design of dust</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Details</h6></li>
    <li><a class="dropdown-item" href="../articles/data.html">Comparing dust systems to data</a></li>
    <li><a class="dropdown-item" href="../articles/details.html">Details</a></li>
    <li><a class="dropdown-item" href="../articles/packaging.html">Packaging dust systems</a></li>
    <li><a class="dropdown-item" href="../articles/periodic.html">Periodic variables details</a></li>
    <li><a class="dropdown-item" href="../articles/writing.html">Writing dust2 systems</a></li>
    <li><a class="dropdown-item" href="../articles/migrating.html">Migrating from dust 1.x.x</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/dust2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Unpack state</h1>
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/dust2/blob/main/R/tools.R" class="external-link"><code>R/tools.R</code></a></small>
      <div class="d-none name"><code>dust_unpack.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Unpack state.  You will see state come out of dust2 systems in
several places, for example <a href="dust_system_state.html">dust_system_state</a>, but it will
typically be an unstructured vector with no names; this is not very
useful!  However, your model knows what each element, or group of
elements "means".  You can unpack your state from this
unstructured array into a named list using this function.  The
same idea applies to the higher-dimensional arrays that you might
get if your system has multiple particles, multiple parameter
groups or has been run for multiple time steps.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dust_unpack_state</span><span class="op">(</span><span class="va">obj</span>, <span class="va">state</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dust_unpack_index</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obj">obj<a class="anchor" aria-label="anchor" href="#arg-obj"></a></dt>
<dd><p>A <code>dust_system</code> object (from <a href="dust_system_create.html">dust_system_create</a>) or
<code>dust_likelihood</code> object (from <a href="dust_filter_create.html">dust_filter_create</a> or
<a href="dust_unfilter_create.html">dust_unfilter_create</a>).</p></dd>


<dt id="arg-state">state<a class="anchor" aria-label="anchor" href="#arg-state"></a></dt>
<dd><p>A state vector, matrix or array.  This might have
come from <a href="dust_system_state.html">dust_system_state</a>, <a href="dust_likelihood_last_trajectories.html">dust_likelihood_last_trajectories</a>, or
<a href="dust_likelihood_last_state.html">dust_likelihood_last_state</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list, where each element corresponds to a logical
compartment.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://mrc-ide.github.io/monty/reference/monty_packer.html" class="external-link">monty::monty_packer</a>, and within that especially
documentation for <code>$unpack()</code>, which powers this function.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">sir</span> <span class="op">&lt;-</span> <span class="fu"><a href="dust_example.html">dust_example</a></span><span class="op">(</span><span class="st">"sir"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sys</span> <span class="op">&lt;-</span> <span class="fu"><a href="dust_system_create.html">dust_system_create</a></span><span class="op">(</span><span class="va">sir</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, n_particles <span class="op">=</span> <span class="fl">10</span>, dt <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="dust_system_set_state_initial.html">dust_system_set_state_initial</a></span><span class="op">(</span><span class="va">sys</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="dust_system_simulate.html">dust_system_simulate</a></span><span class="op">(</span><span class="va">sys</span>, <span class="va">t</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The result here is a 5 x 10 x 21 matrix: 5 states by 10 particles by</span></span></span>
<span class="r-in"><span><span class="co"># 21 times.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  5 10 21</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The 10 particles and 21 times (following t) are simple enough, but</span></span></span>
<span class="r-in"><span><span class="co"># what are our 5 compartments?</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can use dust_unpack_state() to reshape your output as a</span></span></span>
<span class="r-in"><span><span class="co"># list:</span></span></span>
<span class="r-in"><span><span class="fu">dust_unpack_state</span><span class="op">(</span><span class="va">sys</span>, <span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  990  976  964  937  898  856  810  759  686   606   528   460   390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]  990  971  934  869  793  693  602  496  418   365   318   290   264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]  990  980  965  948  918  875  833  771  688   602   514   435   375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]  990  977  940  913  849  772  679  577  461   388   333   287   245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]  990  974  930  888  819  754  678  599  512   441   392   358   330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]  990  982  966  938  901  840  769  687  610   515   452   395   346</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]  990  973  946  893  841  782  710  644  586   509   449   408   367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]  990  974  955  929  867  774  690  599  496   423   356   305   268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]  990  977  964  935  899  856  809  732  617   515   436   360   317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]  990  980  963  933  892  832  765  680  575   493   429   372   331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]   347   307   276   254   232   220   212   200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]   250   240   229   222   218   214   213   210</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]   328   291   267   251   240   232   228   223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]   226   214   200   191   183   182   180   178</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]   301   276   258   248   242   237   227   223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]   328   295   270   248   236   227   222   217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]   331   306   279   260   249   237   232   230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]   241   225   217   203   202   196   195   189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]   283   257   243   232   221   211   206   203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]   301   279   262   248   240   232   226   224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $I</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]   10   18   23   39   53   67   74   81  107   128   141   144   141</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]   10   23   39   74  115  139  156  174  171   144   126    91    70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]   10   14   22   24   30   54   63   91  118   138   159   171   140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]   10   17   35   46   76  108  144  161  207   186   172   128   110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]   10   20   41   59   89  107  109  135  152   137   117    96    76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]   10   11   19   36   46   75  115  132  158   161   139   136   122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]   10   19   34   59   71   86  102  107   99   132   127   106    96</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]   10   20   26   37   76  115  133  157  173   162   162   146   112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]   10   16   22   34   46   53   74  114  160   170   179   165   131</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]   10   13   24   38   64   85  107  139  174   166   151   124   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]   113   107    89    65    51    43    34    32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]    49    39    32    23    17    14     7     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]   114    97    78    52    41    31    24    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]    78    56    36    28    25    16    11     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]    69    64    56    43    34    27    25    18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]    89    81    72    65    46    36    25    22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]    92    75    76    65    45    36    28    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]    91    63    43    37    23    19    16    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]   102    82    74    55    48    36    25    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]    97    78    65    49    32    25    19     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]    0    6   13   24   49   77  116  160  207   266   331   396   469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]    0    6   27   57   92  168  242  330  411   491   556   619   666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]    0    6   13   28   52   71  104  138  194   260   327   394   485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]    0    6   25   41   75  120  177  262  332   426   495   585   645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]    0    6   29   53   92  139  213  266  336   422   491   546   594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]    0    7   15   26   53   85  116  181  232   324   409   469   532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]    0    8   20   48   88  132  188  249  315   359   424   486   537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]    0    6   19   34   57  111  177  244  331   415   482   549   620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]    0    7   14   31   55   91  117  154  223   315   385   475   552</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]    0    7   13   29   44   83  128  181  251   341   420   504   555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]   540   586   635   681   717   737   754   768</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]   701   721   739   755   765   772   780   785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]   558   612   655   697   719   737   748   757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]   696   730   764   781   792   802   809   813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]   630   660   686   709   724   736   748   759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]   583   624   658   687   718   737   753   761</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]   577   619   645   675   706   727   740   750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]   668   712   740   760   775   785   789   795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]   615   661   683   713   731   753   769   783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]   602   643   673   703   728   743   755   767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_cumul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]    0   14   26   53   92  134  180  231  304   384   462   530   600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]    0   19   56  121  197  297  388  494  572   625   672   700   726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]    0   10   25   42   72  115  157  219  302   388   476   555   615</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]    0   13   50   77  141  218  311  413  529   602   657   703   745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]    0   16   60  102  171  236  312  391  478   549   598   632   660</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]    0    8   24   52   89  150  221  303  380   475   538   595   644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]    0   17   44   97  149  208  280  346  404   481   541   582   623</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]    0   16   35   61  123  216  300  391  494   567   634   685   722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]    0   13   26   55   91  134  181  258  373   475   554   630   673</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]    0   10   27   57   98  158  225  310  415   497   561   618   659</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]   643   683   714   736   758   770   778   790</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]   740   750   761   768   772   776   777   780</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]   662   699   723   739   750   758   762   767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]   764   776   790   799   807   808   810   812</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]   689   714   732   742   748   753   763   767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]   662   695   720   742   754   763   768   773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]   659   684   711   730   741   753   758   760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]   749   765   773   787   788   794   795   801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]   707   733   747   758   769   779   784   787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]   689   711   728   742   750   758   764   766</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_inc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]    0    4    3    6    8    7   13   12   12    17    12    16    12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]    0    3    9   17   16   18   10   21   11     5     7     5     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]    0    2    4    5    4   13    8   13   16    23    19    17    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]    0    5    7    7   15   20   22   23   22    13     8     4     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]    0    6    9   12   12   18    9   15   15     9    11     5     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]    0    2    2    7    6   13   21   18   21    21    13     7    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]    0    6    4    7    8   13   18   13    7    14     6     3     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]    0    2    4    5    7   21   22   14   21    12    10    15     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]    0    5    2    6    4    7   14   17   20    18    20    11     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]    0    1    4    5    5   11   18   12   24    20    16    10     9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     9     4     4     4     1     1     2     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     3     2     1     3     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     3     8     4     3     1     2     1     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     2     0     2     3     4     0     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     3     4     1     3     1     2     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     2     7     6     4     1     1     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     8     3     9     3     4     1     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     3     1     2     6     0     0     0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     2     3     2     1     1     1     0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     6     6     4     3     0     2     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Here, the list is named following the compartments (S, I, R,</span></span></span>
<span class="r-in"><span><span class="co"># etc) and is a 10 x 21 matrix (i.e., the remaining dimensions</span></span></span>
<span class="r-in"><span><span class="co"># from y)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We could apply this to the final state, which converts a 5 x 10</span></span></span>
<span class="r-in"><span><span class="co"># matrix of state into a 5 element list of vectors, each with</span></span></span>
<span class="r-in"><span><span class="co"># length 10:</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="dust_system_state.html">dust_system_state</a></span><span class="op">(</span><span class="va">sys</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  5 10</span>
<span class="r-in"><span><span class="fu">dust_unpack_state</span><span class="op">(</span><span class="va">sys</span>, <span class="va">s</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 200 210 223 178 223 217 230 189 203 224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $I</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 32  5 20  9 18 22 20 16 14  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 768 785 757 813 759 761 750 795 783 767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_cumul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 790 780 767 812 767 773 760 801 787 766</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_inc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 3 0 2 0 1 1 0 2 2 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If you need more control, you can use 'dust_unpack_index' to map</span></span></span>
<span class="r-in"><span><span class="co"># names to positions within the state dimension of this array</span></span></span>
<span class="r-in"><span><span class="fu">dust_unpack_index</span><span class="op">(</span><span class="va">sys</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $S</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $I</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_cumul</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cases_inc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

